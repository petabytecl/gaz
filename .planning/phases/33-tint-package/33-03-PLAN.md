---
phase: 33-tint-package
plan: 03
type: execute
wave: 3
depends_on: ["33-02"]
files_modified:
  - logger/provider.go
  - go.mod
  - go.sum
autonomous: true

must_haves:
  truths:
    - "logger/provider.go uses internal logger/tint package for text format"
    - "lmittmann/tint is completely removed from go.mod"
    - "All existing tests pass after migration"
    - "Colored output behavior unchanged from user perspective"
  artifacts:
    - path: "logger/provider.go"
      provides: "Logger creation using tint.Handler"
      contains: "tint.NewHandler"
    - path: "go.mod"
      provides: "Dependency manifest without lmittmann/tint"
      not_contains: "lmittmann/tint"
  key_links:
    - from: "logger/provider.go"
      to: "logger/tint/handler.go"
      via: "import and NewHandler call"
      pattern: "tint\\.NewHandler"
---

<objective>
Integrate the internal logger/tint package into logger/provider.go, replacing the lmittmann/tint import. Remove lmittmann/tint from go.mod and verify all tests pass.

Purpose: Complete the dependency replacement, reducing external dependencies
Output: Working logger using logger/tint, lmittmann/tint removed from go.mod
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/33-tint-package/33-RESEARCH.md
@.planning/phases/33-tint-package/33-02-SUMMARY.md
@logger/provider.go
@logger/tint/handler.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update logger/provider.go to use internal logger/tint package</name>
  <files>logger/provider.go</files>
  <action>
Update logger/provider.go to replace lmittmann/tint with logger/tint:

**Before:**
```go
import (
    "log/slog"
    "os"

    "github.com/lmittmann/tint"
)

// In NewLogger:
handler = tint.NewHandler(os.Stdout, &tint.Options{
    Level:      lvl,
    AddSource:  cfg.AddSource,
    TimeFormat: "15:04:05.000",
})
```

**After:**
```go
import (
    "log/slog"
    "os"

    "github.com/petabytecl/gaz/logger/tint"
)

// In NewLogger:
handler = tint.NewHandler(os.Stdout, &tint.Options{
    Level:      lvl,
    AddSource:  cfg.AddSource,
    TimeFormat: "15:04:05.000",
})
```

The API is designed to be drop-in compatible:
- `tint.NewHandler(w, opts)` matches `tint.NewHandler(w, opts)`
- `tint.Options{Level, AddSource, TimeFormat}` matches `tint.Options`
- TTY detection is automatic (same as lmittmann/tint)

Verify the import path uses internal package:
```go
"github.com/petabytecl/gaz/logger/tint"
```

NOT an external package.
  </action>
  <verify>
```bash
go build ./logger/...
go test ./logger/... -v
```
  </verify>
  <done>
logger/provider.go imports and uses internal logger/tint package instead of lmittmann/tint
  </done>
</task>

<task type="auto">
  <name>Task 2: Remove lmittmann/tint from go.mod and run full test suite</name>
  <files>go.mod, go.sum</files>
  <action>
Remove the lmittmann/tint dependency from go.mod:

1. **Run go mod tidy** to remove unused dependencies:
```bash
go mod tidy
```

2. **Verify lmittmann/tint is removed:**
```bash
grep -q "lmittmann/tint" go.mod && echo "ERROR: tint still in go.mod" || echo "OK: tint removed"
```

3. **Run full test suite:**
```bash
go test ./... -v
```

4. **Verify no import of lmittmann/tint remains:**
```bash
grep -r "lmittmann/tint" --include="*.go" . && echo "ERROR: tint import found" || echo "OK: no tint imports"
```

5. **Check test coverage maintained:**
```bash
go test ./... -cover | grep -E "^ok|coverage"
```

Expected outcome:
- `go.mod` no longer contains `github.com/lmittmann/tint`
- `go.sum` no longer contains lmittmann/tint entries
- All tests pass
- No Go files import lmittmann/tint
  </action>
  <verify>
```bash
# No lmittmann/tint in go.mod
! grep -q "lmittmann/tint" go.mod

# All tests pass
go test ./...

# No stray imports
! grep -r "lmittmann/tint" --include="*.go" .
```
  </verify>
  <done>
lmittmann/tint completely removed from go.mod/go.sum, all tests pass, no stray imports
  </done>
</task>

</tasks>

<verification>
```bash
# Dependency removed
grep "lmittmann/tint" go.mod && exit 1 || echo "Dependency removed ✓"

# No stray imports
grep -r "lmittmann/tint" --include="*.go" . && exit 1 || echo "No stray imports ✓"

# All tests pass
go test ./...

# Logger package specifically
go test ./logger/... -v

# Quick sanity check - run the app if possible
# (or run a simple Go program that uses the logger)
```
</verification>

<success_criteria>
- [ ] logger/provider.go imports `github.com/petabytecl/gaz/logger/tint` (internal)
- [ ] logger/provider.go uses `tint.NewHandler` and `tint.Options`
- [ ] lmittmann/tint removed from go.mod
- [ ] lmittmann/tint removed from go.sum
- [ ] No Go files contain `lmittmann/tint` import
- [ ] `go test ./...` passes (all project tests)
- [ ] `go test ./logger/...` passes specifically
- [ ] `go test ./logger/tint/...` passes
</success_criteria>

<output>
After completion, create `.planning/phases/33-tint-package/33-03-SUMMARY.md`
</output>
