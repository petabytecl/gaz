---
phase: 29-documentation-examples
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - worker/example_test.go
  - cron/example_test.go
autonomous: true

must_haves:
  truths:
    - "Worker package has testable examples for all major APIs"
    - "Cron package has testable examples for all major APIs"
    - "Examples run and pass with go test"
  artifacts:
    - path: "worker/example_test.go"
      provides: "Godoc examples for worker package"
      min_lines: 100
      contains: "func Example"
    - path: "cron/example_test.go"
      provides: "Godoc examples for cron package"
      min_lines: 100
      contains: "func Example"
  key_links:
    - from: "worker/example_test.go"
      to: "worker package exports"
      via: "Example functions reference public API"
      pattern: "worker\\.(Manager|Worker|NewModule)"
    - from: "cron/example_test.go"
      to: "cron package exports"
      via: "Example functions reference public API"
      pattern: "cron\\.(Scheduler|Job|NewModule)"
---

<objective>
Create comprehensive godoc examples for worker and cron packages.

Purpose: Both packages handle background task execution and need examples showing Worker/Job interface implementation, Manager/Scheduler usage, and module integration. Fulfills DOC-03 for remaining core packages.

Output: worker/example_test.go (new), cron/example_test.go (new)
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/29-documentation-examples/29-RESEARCH.md

# Worker package exports
@worker/doc.go
@worker/manager.go
@worker/worker.go
@worker/testing.go

# Cron package exports
@cron/doc.go
@cron/scheduler.go
@cron/job.go
@cron/testing.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create worker package examples</name>
  <files>worker/example_test.go</files>
  <action>
Create `worker/example_test.go` with testable godoc examples for worker package.

Required examples:
1. `Example_worker` - Implementing the Worker interface (OnStart/OnStop with context)
2. `ExampleNewManager` - Creating a worker manager
3. `ExampleManager_Register` - Registering workers with manager
4. `ExampleManager_Start` - Starting all registered workers
5. `ExampleNewModule` - Creating worker module for DI
6. `Example_restartPolicy` - Configuring worker restart behavior
7. `ExampleSimpleWorker` - Using SimpleWorker helper for quick workers
8. `ExampleMockWorker` - Using mock for testing
9. `ExampleTestManager` - Using test manager factory

Pattern for Worker interface example:
```go
package worker_test

import (
    "context"
    "fmt"
    "github.com/petabytecl/gaz/worker"
)

type EmailWorker struct {
    running bool
}

func (w *EmailWorker) Name() string { return "email-worker" }

func (w *EmailWorker) OnStart(ctx context.Context) error {
    w.running = true
    fmt.Println("email worker started")
    // In real code: process queue until ctx.Done()
    return nil
}

func (w *EmailWorker) OnStop(ctx context.Context) error {
    w.running = false
    fmt.Println("email worker stopped")
    return nil
}

func Example_worker() {
    w := &EmailWorker{}
    _ = w.OnStart(context.Background())
    _ = w.OnStop(context.Background())
    // Output:
    // email worker started
    // email worker stopped
}
```

Note: Worker lifecycle is typically async. For examples that can't produce deterministic output, omit `// Output:` comment but still show complete patterns.
  </action>
  <verify>
```bash
go test -v -run Example ./worker/...
```
  </verify>
  <done>worker/example_test.go exists with 9+ Example functions covering Worker interface, Manager, Module, and testing helpers</done>
</task>

<task type="auto">
  <name>Task 2: Create cron package examples</name>
  <files>cron/example_test.go</files>
  <action>
Create `cron/example_test.go` with testable godoc examples for cron package.

Required examples:
1. `Example_job` - Implementing the Job interface (Name/Schedule/Run)
2. `ExampleNewScheduler` - Creating a cron scheduler
3. `ExampleScheduler_Register` - Registering jobs with scheduler
4. `ExampleScheduler_Start` - Starting the scheduler
5. `ExampleNewModule` - Creating cron module for DI
6. `ExampleSimpleJob` - Using SimpleJob helper for quick jobs
7. `ExampleMockJob` - Using mock for testing
8. `ExampleMockResolver` - Using mock resolver for testing
9. `ExampleTestScheduler` - Using test scheduler factory
10. `Example_cronExpression` - Common cron schedule expressions

Pattern for Job interface example:
```go
package cron_test

import (
    "context"
    "fmt"
    "github.com/petabytecl/gaz/cron"
)

type CleanupJob struct{}

func (j *CleanupJob) Name() string { return "cleanup" }
func (j *CleanupJob) Schedule() string { return "0 * * * *" } // Every hour

func (j *CleanupJob) Run(ctx context.Context) error {
    fmt.Println("running cleanup")
    return nil
}

func Example_job() {
    job := &CleanupJob{}
    fmt.Println("name:", job.Name())
    fmt.Println("schedule:", job.Schedule())
    _ = job.Run(context.Background())
    // Output:
    // name: cleanup
    // schedule: 0 * * * *
    // running cleanup
}
```

Include examples of common cron expressions:
- `@every 5m` - Every 5 minutes
- `0 * * * *` - Every hour
- `0 0 * * *` - Daily at midnight
- `0 0 * * 0` - Weekly on Sunday
  </action>
  <verify>
```bash
go test -v -run Example ./cron/...
```
  </verify>
  <done>cron/example_test.go exists with 10+ Example functions covering Job interface, Scheduler, Module, and testing helpers</done>
</task>

</tasks>

<verification>
```bash
# Run all examples
go test -v -run Example ./worker/... ./cron/...

# Count examples
go doc -all ./worker/ | grep -c "func Example"
go doc -all ./cron/ | grep -c "func Example"
```
</verification>

<success_criteria>
1. worker/example_test.go exists with 9+ Example functions
2. cron/example_test.go exists with 10+ Example functions
3. Examples show complete Worker/Job interface implementations
4. Examples demonstrate Manager/Scheduler lifecycle
5. Testing helpers (MockWorker, MockJob, SimpleWorker, SimpleJob) are covered
6. All examples with deterministic output have `// Output:` comments
</success_criteria>

<output>
After completion, create `.planning/phases/29-documentation-examples/29-03-SUMMARY.md`
</output>
