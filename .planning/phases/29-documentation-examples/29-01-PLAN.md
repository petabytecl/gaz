---
phase: 29-documentation-examples
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - di/example_test.go
  - config/example_test.go
autonomous: true

must_haves:
  truths:
    - "DI package has testable examples for all major APIs"
    - "Config package has testable examples for all major APIs"
    - "Examples run and pass with go test"
  artifacts:
    - path: "di/example_test.go"
      provides: "Godoc examples for DI package"
      min_lines: 150
      contains: "func Example"
    - path: "config/example_test.go"
      provides: "Godoc examples for Config package"
      min_lines: 100
      contains: "func Example"
  key_links:
    - from: "di/example_test.go"
      to: "di package exports"
      via: "Example functions reference public API"
      pattern: "di\\.(Container|For|Resolve|Module)"
    - from: "config/example_test.go"
      to: "config package exports"
      via: "Example functions reference public API"
      pattern: "config\\.(Manager|Backend|Unmarshal)"
---

<objective>
Create comprehensive godoc examples for di and config packages.

Purpose: Fulfill DOC-03 requirement for godoc examples on all major public APIs. These two core packages have no example_test.go files yet and represent fundamental gaz functionality.

Output: Two new example_test.go files with testable examples covering Container, For, Resolve, Module (di) and Manager, Backend, Unmarshal (config).
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/29-documentation-examples/29-RESEARCH.md

# Existing example patterns
@example_test.go
@example_lifecycle_test.go

# DI package exports to cover
@di/doc.go
@di/container.go
@di/module.go

# Config package exports to cover
@config/doc.go
@config/manager.go
@config/backend.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create DI package examples</name>
  <files>di/example_test.go</files>
  <action>
Create `di/example_test.go` with testable godoc examples for all major di package exports.

Required examples (follow ExampleTypeName_method naming):
1. `ExampleNewContainer` - Basic container creation
2. `ExampleFor_singleton` - Default singleton scope with Provider
3. `ExampleFor_transient` - Transient scope with new instance per resolve
4. `ExampleFor_eager` - Eager instantiation at Build() time
5. `ExampleFor_instance` - Registering pre-built instance
6. `ExampleResolve` - Basic type resolution
7. `ExampleResolve_withDependencies` - Resolution with automatic wiring
8. `ExampleContainer_Build` - Building container and validating graph
9. `ExampleNewModuleFunc` - Creating modules with di.NewModuleFunc
10. `ExampleModule` - Using di.Module interface

Pattern for each example:
```go
package di_test

import (
    "fmt"
    "github.com/petabytecl/gaz/di"
)

func ExampleNewContainer() {
    c := di.NewContainer()
    // ... setup
    fmt.Println("result")
    // Output: result
}
```

Key rules:
- Use package `di_test` (external test package)
- Use `// Output:` comments for testable examples
- Handle errors with `if err != nil { fmt.Println("error:", err); return }`
- No panic, log.Fatal, or external dependencies
- Show realistic scenarios, not minimal API calls
  </action>
  <verify>
```bash
go test -v -run Example ./di/...
```
All examples must pass.
  </verify>
  <done>di/example_test.go exists with 10+ testable Example functions covering Container, For, Resolve, Module APIs</done>
</task>

<task type="auto">
  <name>Task 2: Create Config package examples</name>
  <files>config/example_test.go</files>
  <action>
Create `config/example_test.go` with testable godoc examples for all major config package exports.

Required examples:
1. `ExampleManager` - Basic manager usage with default backend
2. `ExampleNewManager` - Creating manager with custom backends
3. `ExampleBackend` - Implementing custom backend
4. `ExampleMapBackend` - Using in-memory MapBackend for testing
5. `ExampleProviderValues_Get` - Getting config values
6. `ExampleProviderValues_GetString` - Type-safe string getter
7. `ExampleProviderValues_Unmarshal` - Unmarshaling to struct
8. `ExampleProviderValues_UnmarshalKey` - Unmarshaling nested config
9. `ExampleUnmarshal` - Top-level Unmarshal function
10. `ExampleWithValidation` - Config with validation tags

Pattern for each example:
```go
package config_test

import (
    "fmt"
    "github.com/petabytecl/gaz/config"
)

func ExampleMapBackend() {
    backend := config.NewMapBackend(map[string]any{
        "server.port": 8080,
    })
    mgr := config.NewManager(backend)
    // ...
    // Output: 8080
}
```

Key rules:
- Use package `config_test` (external test package)
- Use MapBackend for in-memory config (no file dependencies)
- Show struct unmarshaling with `gaz` tags
- Demonstrate validation integration where feasible
  </action>
  <verify>
```bash
go test -v -run Example ./config/...
```
All examples must pass.
  </verify>
  <done>config/example_test.go exists with 10+ testable Example functions covering Manager, Backend, Unmarshal APIs</done>
</task>

</tasks>

<verification>
```bash
# Run all examples in both packages
go test -v -run Example ./di/... ./config/...

# Verify examples appear in go doc
go doc -all ./di/ | grep -c "func Example"
go doc -all ./config/ | grep -c "func Example"
```
</verification>

<success_criteria>
1. di/example_test.go exists with 10+ Example functions
2. config/example_test.go exists with 10+ Example functions
3. All examples have `// Output:` comments and pass `go test`
4. Examples cover all major public APIs (Container, For, Resolve, Module, Manager, Backend, Unmarshal)
5. Examples follow established patterns from root package (example_test.go)
</success_criteria>

<output>
After completion, create `.planning/phases/29-documentation-examples/29-01-SUMMARY.md`
</output>
