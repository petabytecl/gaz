# Phase 1.2: Create Makefile - Context

**Gathered:** 2026-01-26
**Status:** Ready for planning

<domain>
## Phase Boundary

Create Makefile with targets for testing, coverage, formatting, and linting. Also includes GitHub Actions workflow that uses these targets.

</domain>

<decisions>
## Implementation Decisions

### Target scope
- Full workflow: test, fmt, lint, cover, clean, help targets
- Default target (`make` with no args): show help
- No install target — gaz is a library, not a binary
- Clean target removes generated files (coverage reports, etc.)

### Coverage behavior
- Separate `test` and `cover` targets
- `cover` enforces 90% minimum threshold, fails if below
- Threshold stored as Makefile variable (easy to adjust)

### Linting configuration
- golangci-lint with default linters
- Require golangci-lint pre-installed, fail with helpful message if missing
- `fmt` includes goimports (single target for all formatting)
- Both modes: `make fmt` auto-fixes, `make fmt-check` verifies (for CI)

### CI integration
- Include GitHub Actions workflow using Makefile targets
- Triggers: push, pull_request, scheduled (nightly)
- Go version matrix: 1.22, 1.23, 1.24 (last 3 versions)
- CI runs full validation: fmt-check + lint + cover

### Claude's Discretion
- Exact help message formatting
- Makefile variable naming conventions
- GitHub Actions job naming and structure
- Scheduled run timing (e.g., midnight UTC)

</decisions>

<specifics>
## Specific Ideas

No specific requirements — open to standard approaches

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 01.2-create-makefile*
*Context gathered: 2026-01-26*
