---
phase: 14.2-update-docs
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - di/README.md
  - config/README.md
  - worker/README.md
  - examples/config-loading/README.md
autonomous: true

must_haves:
  truths:
    - "di/README.md exists and documents standalone DI usage"
    - "config/README.md exists and documents config package usage"
    - "worker/README.md exists and documents worker package usage"
    - "examples/config-loading/README.md matches current main.go (ConfigProvider pattern)"
  artifacts:
    - path: "di/README.md"
      provides: "Standalone DI documentation"
      contains: "di.New()"
    - path: "config/README.md"
      provides: "Standalone config documentation"
      contains: "config.New("
    - path: "worker/README.md"
      provides: "Worker package documentation"
      contains: "Worker interface"
    - path: "examples/config-loading/README.md"
      provides: "Updated example README"
      contains: "ConfigProvider"
  key_links:
    - from: "di/README.md"
      to: "../README.md"
      via: "Link to main gaz documentation"
      pattern: "gaz framework"
---

<objective>
Create standalone package READMEs for di, config, and worker packages, and update the config-loading example README.

Purpose: Per CONTEXT.md decision, each package should have its own README that works as standalone docs on pkg.go.dev. The config-loading example README is stale and needs to match the new ConfigProvider pattern in main.go.
Output: Three new package READMEs and one updated example README.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14.2-update-all-relevant-documentation-and-examples/14.2-CONTEXT.md

Reference for package APIs:
@di/doc.go
@config/doc.go
@worker/doc.go
@examples/config-loading/main.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create package READMEs</name>
  <files>di/README.md, config/README.md, worker/README.md</files>
  <action>
Create README.md files for di, config, and worker packages that work standalone on pkg.go.dev.

Each README should:
1. Start with package name as H1
2. Show installation (go get)
3. Show quick start usage
4. Document key types and functions
5. Link back to main gaz README

**di/README.md** - Based on di/doc.go:
```markdown
# gaz/di

Standalone dependency injection container for Go.

## Installation

go get github.com/petabytecl/gaz/di

## Quick Start

c := di.New()
di.For[*Database](c).Provider(NewDatabase)
c.Build()
db, _ := di.Resolve[*Database](c)

## Features

- Type-safe generics API
- Singleton/Transient/Eager scopes
- Named registrations
- Lifecycle hooks
- Works standalone or with gaz.App

See [gaz framework](../README.md) for full documentation.
```

**config/README.md** - Based on config/doc.go:
```markdown
# gaz/config

Standalone configuration management for Go.

## Installation

go get github.com/petabytecl/gaz/config

## Quick Start

import "github.com/petabytecl/gaz/config"
import _ "github.com/petabytecl/gaz/config/viper" // Backend

mgr := config.New(config.WithName("config"), config.WithSearchPaths("."))
mgr.LoadInto(cfg)

## Features

- Backend interface abstracts viper
- File loading (YAML, JSON, TOML)
- Environment variable binding
- Validation via Defaulter/Validator interfaces

See [gaz framework](../README.md) for full documentation.
```

**worker/README.md** - Based on worker/doc.go:
```markdown
# gaz/worker

Background worker lifecycle management for Go.

## Installation

go get github.com/petabytecl/gaz/worker

## Quick Start

Implement the Worker interface:

type MyWorker struct{ stop chan struct{} }
func (w *MyWorker) Name() string { return "my-worker" }
func (w *MyWorker) Start() { /* spawn goroutine */ }
func (w *MyWorker) Stop() { close(w.stop) }

## Features

- Worker interface: Start/Stop/Name
- Supervised restart with backoff
- Circuit breaker for crash loops
- Integrates with gaz.App lifecycle

See [gaz framework](../README.md) for full documentation.
```
  </action>
  <verify>test -f di/README.md && test -f config/README.md && test -f worker/README.md</verify>
  <done>Package READMEs created for di, config, and worker packages</done>
</task>

<task type="auto">
  <name>Task 2: Update examples/config-loading/README.md</name>
  <files>examples/config-loading/README.md</files>
  <action>
Completely rewrite examples/config-loading/README.md to match the current main.go which uses the ConfigProvider pattern.

Current problems:
- Shows old env var pattern (APP__SERVER__PORT with double underscore)
- Doesn't document ConfigProvider, ConfigNamespace, ConfigFlags
- Doesn't explain ProviderValues injection pattern

The new README should document:

1. **What This Demonstrates**
   - ConfigProvider interface (ConfigNamespace + ConfigFlags)
   - ProviderValues injection in provider functions
   - Config file + environment variable + default precedence

2. **Run**
   ```bash
   go run .
   ```
   With env override:
   ```bash
   SERVER_HOST=0.0.0.0 SERVER_PORT=9090 go run .
   ```

3. **Expected Output** (match actual output from main.go)

4. **ConfigProvider Pattern**
   - Explain ConfigNamespace returns prefix
   - Explain ConfigFlags declares keys with types and defaults
   - Explain ProviderValues is injected in provider constructor

5. **Environment Variable Mapping** - single underscore:
   - server.host -> SERVER_HOST
   - server.port -> SERVER_PORT
   - server.debug -> SERVER_DEBUG

6. **Config Sources** (priority order):
   1. Environment variables
   2. Config file (config.yaml)
   3. Defaults from ConfigFlags()

Reference the actual examples/config-loading/main.go for accuracy.
  </action>
  <verify>grep -c "ConfigProvider\|ConfigNamespace\|ProviderValues" examples/config-loading/README.md returns >= 3; grep -c "APP__" examples/config-loading/README.md returns 0</verify>
  <done>examples/config-loading/README.md documents ConfigProvider pattern matching main.go</done>
</task>

</tasks>

<verification>
Run after all tasks complete:

```bash
# Verify package READMEs exist
test -f di/README.md && echo "di/README.md exists"
test -f config/README.md && echo "config/README.md exists"
test -f worker/README.md && echo "worker/README.md exists"

# Verify key content
grep -c "di.New\|di.For\[" di/README.md  # Should be >= 2
grep -c "config.New" config/README.md  # Should be >= 1
grep -c "Worker interface\|Start\|Stop" worker/README.md  # Should be >= 3

# Verify example README updated
grep -c "ConfigProvider" examples/config-loading/README.md  # Should be >= 1
! grep "APP__" examples/config-loading/README.md  # Should NOT find old pattern
```
</verification>

<success_criteria>
- di/README.md created with standalone usage examples
- config/README.md created with standalone usage examples
- worker/README.md created with Worker interface documentation
- examples/config-loading/README.md updated to match ConfigProvider pattern
- All READMEs link back to main gaz README
- No old environment variable patterns (double underscore)
</success_criteria>

<output>
After completion, create `.planning/phases/14.2-update-all-relevant-documentation-and-examples/14.2-04-SUMMARY.md`
</output>
