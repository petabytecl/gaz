---
phase: 14.2-update-docs
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/advanced.md
  - README.md
  - CHANGELOG.md
autonomous: true

must_haves:
  truths:
    - "docs/advanced.md uses For[T]() API exclusively"
    - "README.md mentions worker package in packages section"
    - "CHANGELOG.md documents di, config, and worker package additions"
  artifacts:
    - path: "docs/advanced.md"
      provides: "Advanced documentation with v2.0 patterns"
      contains: "gaz.For["
    - path: "README.md"
      provides: "Main README with worker package reference"
      contains: "worker"
    - path: "CHANGELOG.md"
      provides: "Complete v2.0 changes"
      contains: "worker package"
  key_links:
    - from: "README.md"
      to: "docs/advanced.md"
      via: "Documentation links"
      pattern: "\\[Advanced\\]\\(docs/advanced\\.md\\)"
---

<objective>
Update advanced documentation and complete the main README and CHANGELOG with v2.0 package information.

Purpose: Advanced docs use old APIs, README is missing worker package info, CHANGELOG is missing di/config/worker package additions.
Output: Fully updated advanced.md, enhanced README.md, and complete CHANGELOG.md.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14.2-update-all-relevant-documentation-and-examples/14.2-CONTEXT.md

Reference for correct patterns:
@README.md
@CHANGELOG.md
@worker/doc.go
@examples/modules/main.go
@examples/cobra-cli/main.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite docs/advanced.md</name>
  <files>docs/advanced.md</files>
  <action>
Rewrite docs/advanced.md to use For[T]() API exclusively.

Current problems:
- Lines 209-211, 295, 303: Uses `app.ProvideSingleton()` which was removed
- Lines 271-274, 480-481, 489-490: Uses `app.WithConfig()`, `app.ProvideEager()`, `app.ProvideTransient()` which were removed

Changes needed:
1. Cobra Integration section: Replace `app.ProvideSingleton()` with `gaz.For[T](app.Container()).Provider()`
2. Health Checks section: Update to use For[T]() pattern
3. Best Practices section: Update Eager/Transient examples to For[T]() pattern
4. Keep Modules section (it already uses For[T]() pattern)
5. Keep Testing section (it already uses For[T]() pattern)

Update Cobra Integration (line 209):
```go
// Before (WRONG)
app.ProvideSingleton(NewDatabase)
app.ProvideSingleton(NewServer)

// After (CORRECT)
gaz.For[*Database](app.Container()).Provider(NewDatabase)
gaz.For[*Server](app.Container()).Provider(NewServer)
```

Update Best Practices section (lines 476-491):
```go
// Eager for Infrastructure
gaz.For[*ConnectionPool](c).Eager().Provider(NewConnectionPool)
gaz.For[*Migrator](c).Eager().Provider(NewMigrator)

// Transient for Stateless
gaz.For[*RequestHandler](c).Transient().Provider(NewRequestHandler)
gaz.For[*CommandHandler](c).Transient().Provider(NewCommandHandler)
```

Remove `app.WithConfig()` references entirely (line 271-278) - Cobra integration should show flag binding through the provider pattern, not WithConfig.
  </action>
  <verify>grep -E "app\.Provide(Singleton|Transient|Eager)|app\.WithConfig" docs/advanced.md returns 0; grep -c "gaz.For\[" docs/advanced.md returns >= 15</verify>
  <done>advanced.md uses For[T]() pattern throughout with no references to removed APIs</done>
</task>

<task type="auto">
  <name>Task 2: Update README.md with worker package</name>
  <files>README.md</files>
  <action>
Update README.md to mention the worker package in the Features section.

Current features list (lines 64-73) includes:
- Type-safe container
- Singleton and transient scopes
- Lifecycle hooks
- Graceful shutdown
- Configuration loading
- Struct validation
- Health checks
- Cobra CLI integration
- Module organization

Add to the features list after "Health checks":
```markdown
- **Background workers** - Supervised workers with restart, circuit breaker, lifecycle integration
```

Also consider adding a brief mention in the Documentation section if there's a worker-specific doc (there isn't currently, but package READMEs will be created in plan 04).

The README is already mostly current - just missing worker package mention.
  </action>
  <verify>grep -c "worker\|Worker" README.md returns >= 1</verify>
  <done>README.md includes worker package in features list</done>
</task>

<task type="auto">
  <name>Task 3: Update CHANGELOG.md with v2.0 package additions</name>
  <files>CHANGELOG.md</files>
  <action>
Update CHANGELOG.md to document the di, config, and worker package additions in v2.0.

Current CHANGELOG (lines 8-50) documents breaking changes and migration guide, but missing:
- New di package (standalone DI container)
- New config package (standalone configuration management)
- New worker package (background workers with lifecycle)

Add to the [2.0.0] section, after "### Improved", a new section:

```markdown
### Added

- **gaz/di package** - Standalone DI container that works without gaz.App. Exports `di.New()`, `di.For[T]()`, `di.Resolve[T]()`. Use for testing or library code.
- **gaz/config package** - Standalone configuration management with Backend interface. Exports `config.New()`, `config.Manager`, `config.Backend`. Viper implementation in `gaz/config/viper`.
- **gaz/worker package** - Background workers with lifecycle integration. Exports `worker.Worker` interface, `worker.Manager`, with automatic restart, circuit breaker, and graceful shutdown.
- **ConfigProvider interface** - Services can declare config requirements via `ConfigNamespace()` and `ConfigFlags()` methods
- **ProviderValues** - Type-safe access to config values within provider functions
- **WithConfigFile option** - Explicit config file path without search path lookup
```

Keep the existing sections (BREAKING CHANGES, Migration Guide, Benefits, Improved) intact.
  </action>
  <verify>grep -c "gaz/di package\|gaz/config package\|gaz/worker package" CHANGELOG.md returns 3</verify>
  <done>CHANGELOG.md documents all v2.0 package additions (di, config, worker)</done>
</task>

</tasks>

<verification>
Run after all tasks complete:

```bash
# Verify no old API references in advanced.md
! grep -E "app\.Provide(Singleton|Transient|Eager)|app\.WithConfig" docs/advanced.md

# Verify For[T]() pattern used
grep -c "gaz\.For\[" docs/advanced.md  # Should be >= 15

# Verify README mentions workers
grep -c "worker\|Worker" README.md  # Should be >= 1

# Verify CHANGELOG has package additions
grep -c "gaz/di package" CHANGELOG.md  # Should be 1
grep -c "gaz/config package" CHANGELOG.md  # Should be 1
grep -c "gaz/worker package" CHANGELOG.md  # Should be 1
```
</verification>

<success_criteria>
- docs/advanced.md uses For[T]() API exclusively
- README.md mentions worker package in features
- CHANGELOG.md documents di, config, and worker package additions
- No references to removed APIs in advanced.md
</success_criteria>

<output>
After completion, create `.planning/phases/14.2-update-all-relevant-documentation-and-examples/14.2-03-SUMMARY.md`
</output>
