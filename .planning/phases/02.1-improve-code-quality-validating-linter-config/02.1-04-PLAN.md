---
phase: 02.1-improve-code-quality
plan: 04
type: execute
wave: 2
depends_on: ["02.1-01"]
files_modified:
  - app_test.go
  - container_test.go
  - container_graph_test.go
  - inject_test.go
  - lifecycle_test.go
  - lifecycle_engine_test.go
  - resolution_test.go
  - service_test.go
  - registration_test.go
  - types_test.go
autonomous: true

must_haves:
  truths:
    - "No testifylint suite-dont-use-pkg issues"
    - "No unused-parameter issues in test files"
  artifacts:
    - path: "*_test.go"
      provides: "Tests using suite methods directly"
  key_links:
    - from: "test suites"
      to: "testify assertions"
      via: "s.Equal, s.Require().NoError"
      pattern: "s\\.(Equal|NotNil|True|False|Error|NoError)"
---

<objective>
Fix testifylint and unused-parameter issues in all test files

Purpose: Convert to suite assertion methods and fix unused parameters (~100 issues)
Output: All test files using proper suite methods
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Fix testifylint issues - convert to suite methods</name>
  <files>*_test.go (all test files)</files>
  <action>
Convert all testify assertions from package functions to suite methods:

**Pattern replacements:**

1. `assert.X(s.T(), ...)` → `s.X(...)`
   - `assert.Equal(s.T(), a, b)` → `s.Equal(a, b)`
   - `assert.NotNil(s.T(), x)` → `s.NotNil(x)`
   - `assert.Nil(s.T(), x)` → `s.Nil(x)`
   - `assert.True(s.T(), x)` → `s.True(x)`
   - `assert.False(s.T(), x)` → `s.False(x)`
   - `assert.Error(s.T(), err)` → `s.Error(err)`
   - `assert.ErrorIs(s.T(), err, target)` → `s.ErrorIs(err, target)`
   - `assert.Contains(s.T(), a, b)` → `s.Contains(a, b)`
   - `assert.NotEqual(s.T(), a, b)` → `s.NotEqual(a, b)`
   - `assert.Same(s.T(), a, b)` → `s.Same(a, b)`
   - `assert.Len(s.T(), x, n)` → `s.Len(x, n)`
   - `assert.Greater(s.T(), a, b)` → `s.Greater(a, b)`

2. `require.X(s.T(), ...)` → `s.Require().X(...)`
   - `require.NoError(s.T(), err)` → `s.Require().NoError(err)`
   - `require.Error(s.T(), err)` → `s.Require().Error(err)`
   - `require.NotNil(s.T(), x)` → `s.Require().NotNil(x)`

**Files to update (in order):**
- container_test.go (most issues)
- app_test.go
- service_test.go
- resolution_test.go
- inject_test.go
- lifecycle_test.go
- lifecycle_engine_test.go
- container_graph_test.go
- registration_test.go
- types_test.go

After conversion, remove unused imports of assert/require packages if no longer needed.
  </action>
  <verify>Run `make lint 2>&1 | grep "suite-dont-use-pkg" | wc -l` returns 0</verify>
  <done>All testifylint suite-dont-use-pkg issues resolved (50 issues)</done>
</task>

<task type="auto">
  <name>Task 2: Fix unused-parameter issues in test files</name>
  <files>*_test.go (all test files)</files>
  <action>
Rename unused parameters to `_` in all test files:

**Common patterns to fix:**

1. Provider functions with unused container:
   - `func(c *Container) (*T, error)` → `func(_ *Container) (*T, error)`
   
2. Lifecycle hooks with unused context:
   - `func(ctx context.Context) error` → `func(_ context.Context) error`

**Files with unused-parameter issues:**
- inject_test.go (many provider funcs)
- resolution_test.go (many provider funcs)
- service_test.go (provider funcs)
- lifecycle_test.go (hook funcs with ctx)
- lifecycle_engine_test.go (provider funcs)
- container_test.go (provider funcs)
- app_test.go (provider funcs, if any remaining)

Search for `unused-parameter` in lint output and fix each occurrence.
  </action>
  <verify>Run `make lint 2>&1 | grep "unused-parameter" | wc -l` returns 0</verify>
  <done>All unused-parameter issues in test files resolved (~47 issues)</done>
</task>

</tasks>

<verification>
```bash
# Verify testifylint issues resolved
make lint 2>&1 | grep "testifylint" | wc -l  # Should be 0

# Verify unused-parameter issues resolved
make lint 2>&1 | grep "unused-parameter" | wc -l  # Should be 0

# Run tests to ensure nothing broke
make test
```
</verification>

<success_criteria>
- [ ] All suite-dont-use-pkg issues fixed (50 issues)
- [ ] All unused-parameter issues in test files fixed (~47 issues)
- [ ] All tests still pass
- [ ] Total: ~97 issues resolved
</success_criteria>

<output>
After completion, create `.planning/phases/02.1-improve-code-quality-validating-linter-config/02.1-04-SUMMARY.md`
</output>
