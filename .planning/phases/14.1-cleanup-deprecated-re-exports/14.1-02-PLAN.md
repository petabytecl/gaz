---
phase: 14.1-cleanup-deprecated-re-exports
plan: 02
type: execute
wave: 2
depends_on: ["14.1-01"]
files_modified:
  - config_test.go
  - config_manager_test.go
  - provider_config_test.go
  - validation_test.go
  - example_config_test.go
  - doc.go
autonomous: true

must_haves:
  truths:
    - "All tests pass (go test ./...)"
    - "Test files import github.com/petabytecl/gaz/config for config options"
    - "doc.go examples use config.WithEnvPrefix not gaz.WithEnvPrefix"
    - "validation_test.go uses config.ErrConfigValidation"
  artifacts:
    - path: "config_test.go"
      provides: "Config tests using config package imports"
      contains: "config.WithEnvPrefix"
    - path: "config_manager_test.go"
      provides: "ConfigManager tests using config package imports"
      contains: "config.WithName"
    - path: "validation_test.go"
      provides: "Validation tests using config.ErrConfigValidation"
      contains: "config.ErrConfigValidation"
    - path: "doc.go"
      provides: "Package documentation with config import pattern"
      contains: "config.WithEnvPrefix"
  key_links:
    - from: "test files"
      to: "config package"
      via: "import statement"
      pattern: "github.com/petabytecl/gaz/config"
---

<objective>
Update all test files and documentation to import config package directly instead of using removed gaz.* re-exports.

Purpose: Complete the cleanup by fixing all references to the removed re-exports. Tests must pass after the changes from Plan 01.

Output: All test files compile and pass, doc.go shows correct import pattern for config options.
</objective>

<execution_context>
@~/.config/opencode/get-shit-done/workflows/execute-plan.md
@~/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/14.1-cleanup-deprecated-re-exports/14.1-CONTEXT.md
@.planning/phases/14.1-cleanup-deprecated-re-exports/14.1-01-SUMMARY.md

# Test files to update
@config_test.go
@config_manager_test.go
@provider_config_test.go
@validation_test.go
@example_config_test.go
@doc.go
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update root package test file imports</name>
  <files>config_test.go, config_manager_test.go, provider_config_test.go, validation_test.go</files>
  <action>
Update each test file to import the config package and replace gaz.* references with config.*:

**config_test.go:**
- Add import: `"github.com/petabytecl/gaz/config"`
- Replace: `gaz.WithEnvPrefix` → `config.WithEnvPrefix`
- Replace: `gaz.WithSearchPaths` → `config.WithSearchPaths`
- Replace: `gaz.WithProfileEnv` → `config.WithProfileEnv`

**config_manager_test.go:**
- Add import: `"github.com/petabytecl/gaz/config"`
- Replace: `gaz.WithEnvPrefix` → `config.WithEnvPrefix`
- Replace: `gaz.WithName` → `config.WithName`
- Replace: `gaz.WithSearchPaths` → `config.WithSearchPaths`
- Replace: `gaz.WithProfileEnv` → `config.WithProfileEnv`
- Replace: `gaz.WithDefaults` → `config.WithDefaults`

**provider_config_test.go:**
- Add import: `"github.com/petabytecl/gaz/config"`
- Replace: `gaz.WithEnvPrefix` → `config.WithEnvPrefix`

**validation_test.go:**
- Add import: `"github.com/petabytecl/gaz/config"`
- Replace: `gaz.ErrConfigValidation` → `config.ErrConfigValidation`

Important: Keep all gaz.* references for things that ARE still exported (gaz.New, gaz.For, gaz.Resolve, gaz.NewConfigManager, gaz.ErrNotFound, gaz.ErrDuplicate, etc.)
  </action>
  <verify>
```bash
# Check imports added
grep -q 'github.com/petabytecl/gaz/config' config_test.go && echo "config_test.go: import added"
grep -q 'github.com/petabytecl/gaz/config' config_manager_test.go && echo "config_manager_test.go: import added"
grep -q 'github.com/petabytecl/gaz/config' provider_config_test.go && echo "provider_config_test.go: import added"
grep -q 'github.com/petabytecl/gaz/config' validation_test.go && echo "validation_test.go: import added"

# Compile check
go build ./... 2>&1 | head -20
```
  </verify>
  <done>All four test files import config package and use config.* for config options/errors</done>
</task>

<task type="auto">
  <name>Task 2: Update example and documentation files</name>
  <files>example_config_test.go, doc.go</files>
  <action>
**example_config_test.go:**
- Add import: `"github.com/petabytecl/gaz/config"`
- Replace: `gaz.WithName` → `config.WithName`
- Replace: `gaz.WithSearchPaths` → `config.WithSearchPaths`
- Replace: `gaz.WithDefaults` → `config.WithDefaults`
- Update the comment on line 55 that mentions "Options include WithName, WithSearchPaths..." to reference `config.WithName`, `config.WithSearchPaths`, etc.

**doc.go:**
- The example on line 61 shows `gaz.WithEnvPrefix("APP")` - this needs to change
- Add a note that config options come from the config package:
  
Before:
```go
//	app.WithConfig(&Config{}, gaz.WithEnvPrefix("APP"))
```

After:
```go
//	import "github.com/petabytecl/gaz/config"
//	app.WithConfig(&Config{}, config.WithEnvPrefix("APP"))
```
  </action>
  <verify>
```bash
# Check example_config_test.go uses config.*
grep -q 'config.WithName' example_config_test.go && echo "example: WithName updated"
grep -q 'config.WithDefaults' example_config_test.go && echo "example: WithDefaults updated"

# Check doc.go shows config import pattern
grep -q 'config.WithEnvPrefix' doc.go && echo "doc.go: updated"

# Verify examples compile
go test -run "^Example" -v 2>&1 | head -30
```
  </verify>
  <done>example_config_test.go and doc.go show correct config.* import pattern</done>
</task>

<task type="auto">
  <name>Task 3: Run full test suite and verify</name>
  <files>N/A (verification only)</files>
  <action>
Run the complete test suite to verify all changes work correctly:

```bash
go test ./... -v
```

If any tests fail, fix the remaining gaz.* → config.* replacements.

Check for any remaining references to removed APIs:
- `gaz.ConfigOption`
- `gaz.WithName`, `gaz.WithType`, `gaz.WithEnvPrefix`, `gaz.WithSearchPaths`, `gaz.WithProfileEnv`, `gaz.WithDefaults`
- `gaz.Defaulter`, `gaz.Validator`
- `gaz.ErrConfigValidation`

Run `go vet ./...` to catch any issues.
  </action>
  <verify>
```bash
# Full test suite
go test ./...

# Verify no remaining references to removed APIs
! grep -rn "gaz\.ConfigOption\|gaz\.WithName\|gaz\.WithType\|gaz\.WithEnvPrefix\|gaz\.WithSearchPaths\|gaz\.WithProfileEnv\|gaz\.WithDefaults" *.go
! grep -rn "gaz\.Defaulter\|gaz\.Validator" *.go
! grep -rn "gaz\.ErrConfigValidation" *.go

# Vet check
go vet ./...
```
  </verify>
  <done>All tests pass, no remaining references to removed APIs, go vet clean</done>
</task>

</tasks>

<verification>
```bash
# Full test suite passes
go test ./...

# No references to removed APIs
! grep -rn "gaz\.ConfigOption" *.go
! grep -rn "gaz\.WithName\|gaz\.WithType\|gaz\.WithEnvPrefix" *.go
! grep -rn "gaz\.WithSearchPaths\|gaz\.WithProfileEnv\|gaz\.WithDefaults" *.go
! grep -rn "gaz\.Defaulter\|gaz\.Validator" *.go
! grep -rn "gaz\.ErrConfigValidation" *.go

# Config package correctly imported in test files
grep -q 'github.com/petabytecl/gaz/config' config_test.go
grep -q 'github.com/petabytecl/gaz/config' config_manager_test.go
grep -q 'github.com/petabytecl/gaz/config' provider_config_test.go
grep -q 'github.com/petabytecl/gaz/config' validation_test.go
grep -q 'github.com/petabytecl/gaz/config' example_config_test.go

# Vet passes
go vet ./...
```
</verification>

<success_criteria>
1. `go test ./...` passes (all tests green)
2. No gaz.ConfigOption, gaz.With*, gaz.Defaulter, gaz.Validator, gaz.ErrConfigValidation references remain
3. All test files properly import config package
4. doc.go shows config.WithEnvPrefix pattern
5. go vet ./... passes
</success_criteria>

<output>
After completion, create `.planning/phases/14.1-cleanup-deprecated-re-exports/14.1-02-SUMMARY.md`
</output>
