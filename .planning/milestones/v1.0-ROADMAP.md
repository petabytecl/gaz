# Milestone v1.0: MVP

**Status:** ✅ SHIPPED 2026-01-26
**Phases:** 1-6
**Total Plans:** 35

## Overview

gaz delivers a unified Go application framework through 6 phases: starting with a type-safe generic DI container as the foundation, adding lifecycle management for deterministic startup/shutdown, then building the fluent App API with Cobra integration. Optional production-ready subsystems (config, health checks, logging) complete the framework.

## Phases

### Phase 1: Core DI Container
**Goal**: Developers can register and resolve dependencies with type-safe generics
**Depends on**: Nothing (first phase)
**Requirements**: DI-01, DI-02, DI-03, DI-04, DI-05, DI-06, DI-07, DI-08, DI-09
**Plans**: 6 plans

Plans:
- [x] 01-01-PLAN.md — Foundation (errors, types, container) ✓
- [x] 01-02-PLAN.md — Service wrappers (lazy, transient, eager, instance) ✓
- [x] 01-03-PLAN.md — Registration API (For[T], fluent builder) ✓
- [x] 01-04-PLAN.md — Resolution & cycle detection (Resolve[T]) ✓
- [x] 01-05-PLAN.md — Struct tag injection (gaz:"inject") ✓
- [x] 01-06-PLAN.md — Build phase & integration tests ✓

### Phase 1.1: Update Test Framework for Testify (INSERTED)
**Goal:** All 6 test files migrated to testify suite pattern with require/assert assertions
**Depends on**: Phase 1
**Plans:** 3 plans

Plans:
- [x] 01.1-01-PLAN.md — Setup testify + migrate types/registration/service tests ✓
- [x] 01.1-02-PLAN.md — Migrate inject and resolution tests ✓
- [x] 01.1-03-PLAN.md — Migrate container tests + final verification ✓

### Phase 1.2: Create Makefile (INSERTED)
**Goal:** Development workflow automation with Makefile targets and GitHub Actions CI
**Depends on**: Phase 1
**Plans:** 1 plan

Plans:
- [x] 01.2-01-PLAN.md — Create Makefile + GitHub Actions CI workflow ✓

### Phase 2: Lifecycle Management
**Goal**: App startup and shutdown are deterministic and graceful
**Depends on**: Phase 1 (hooks register services in container)
**Requirements**: LIFE-01, LIFE-02, LIFE-03, LIFE-04, LIFE-05, LIFE-06, LIFE-07, LIFE-08
**Plans**: 4 plans

Plans:
- [x] 02-01-PLAN.md — Enable container to record dependency graph during resolution ✓
- [x] 02-02-PLAN.md — Define lifecycle interfaces and update builder API ✓
- [x] 02-03-PLAN.md — Implement lifecycle ordering logic (TDD) ✓
- [x] 02-04-PLAN.md — Implement gaz.App wrapper with run/stop/signals ✓

### Phase 2.1: Improve Code Quality (INSERTED)
**Goal:** All linter warnings resolved, `make lint` passes cleanly
**Depends on**: Phase 2
**Plans:** 5 plans

Plans:
- [x] 02.1-01-PLAN.md — Configure linter and auto-fix formatting issues ✓
- [x] 02.1-02-PLAN.md — Fix production code issues (app.go, container.go, registration.go) ✓
- [x] 02.1-03-PLAN.md — Fix production code issues (service.go, types.go, lifecycle_engine.go) ✓
- [x] 02.1-04-PLAN.md — Fix testifylint and unused-parameter in test files ✓
- [x] 02.1-05-PLAN.md — Fix errcheck, shadow, unused, intrange in test files ✓

### Phase 3: App Builder + Cobra
**Goal**: Developers can build and run applications with a fluent API
**Depends on**: Phase 2 (builder orchestrates container + lifecycle)
**Requirements**: APP-01, APP-02, APP-03, APP-04, APP-05, APP-06
**Plans**: 4 plans

Plans:
- [x] 03-01-PLAN.md — Core App refactor (gaz.New(), provider methods, Build validation) ✓
- [x] 03-02-PLAN.md — Module composition (Module() method, duplicate detection) ✓
- [x] 03-03-PLAN.md — Cobra integration (WithCobra(), FromContext()) ✓
- [x] 03-04-PLAN.md — End-to-end integration tests ✓

### Phase 4: Config System
**Goal**: Applications load configuration from multiple sources
**Depends on**: Phase 3 (config integrates with App builder and Cobra flags)
**Requirements**: CONF-01, CONF-02, CONF-03
**Plans**: 2 plans

Plans:
- [x] 04-01-PLAN.md — Core Config Infrastructure (Viper, Interfaces, App integration) ✓
- [x] 04-02-PLAN.md — Cobra Flag Binding & Profile Support ✓

### Phase 4.1: Refactor configuration (INSERTED)
**Goal:** Decouple configuration logic into ConfigManager with Functional Options
**Depends on:** Phase 4
**Plans:** 2 plans

Plans:
- [x] 04.1-01-PLAN.md — Implement ConfigManager and Options ✓
- [x] 04.1-02-PLAN.md — Integrate ConfigManager into App and Cobra ✓

### Phase 5: Health Checks
**Goal**: Applications expose production-ready health endpoints
**Depends on**: Phase 3 (health checks register in container, execute in lifecycle)
**Requirements**: HLTH-01, HLTH-02, HLTH-03, HLTH-04, HLTH-05
**Plans**: 3 plans

Plans:
- [x] 05-01-PLAN.md — Core Infrastructure (interfaces, registry, shutdown hook) ✓
- [x] 05-02-PLAN.md — Handlers & IETF Formatting (JSON output, status codes) ✓
- [x] 05-03-PLAN.md — Management Server (dedicated port, app integration) ✓
- [x] 05-04-SUMMARY.md — Fix linter issues (43 issues resolved) ✓

### Phase 6: Logging (slog)
**Goal**: Applications have structured logging with context propagation
**Depends on**: Phase 3 (logger registers in container, used by framework)
**Requirements**: LOG-01, LOG-02, LOG-03, LOG-04
**Plans**: 4 plans

Plans:
- [x] 06-01-PLAN.md — Core Infrastructure (slog, tint, ContextHandler) ✓
- [x] 06-02-PLAN.md — Context Middleware (RequestID, context helpers) ✓
- [x] 06-03-PLAN.md — Framework Integration (App, Lifecycle) ✓
- [x] 06-04-PLAN.md — Cleanup & Linting ✓

---

## Milestone Summary

**Decimal Phases:**

- Phase 1.1: Update Test Framework for Testify (inserted after Phase 1 for better testing)
- Phase 1.2: Create Makefile (inserted after Phase 1.1 for workflow automation)
- Phase 2.1: Improve Code Quality (inserted after Phase 2 for linting/quality)
- Phase 4.1: Refactor configuration (inserted after Phase 4 for decoupling)

**Key Decisions:**

- Drop hierarchical scopes (Rationale: Not used in practice, adds complexity)
- Clean break from dibx/gazx API (Rationale: Enables ideal API design)
- Core + subpackages structure (Rationale: Import only what you need)
- Use `spf13/viper` (instance mode) (Rationale: Integrates natively with Cobra, avoid global state)
- `Defaulter`/`Validator` interfaces (Rationale: Prefer logic over tags for robust config lifecycle)
- Config as Singleton Instance (Rationale: Config object accessible via DI injection)
- Auto-bind Env Vars (Rationale: Reflection-based binding ensures Env overrides work without explicit keys)
- Integrated logger into App struct directly (Rationale: No extra LifecycleEngine struct)

**Issues Resolved:**

- Full linter compliance (Phase 2.1, 5, 6)
- Test framework migration to testify (Phase 1.1)

**Technical Debt Incurred:**

- Architecture: WithHealthChecks() accepts value config, limiting override via Env/File loading later
- Documentation: LOG-* requirements marked Pending in REQUIREMENTS.md despite implementation

---

_For current project status, see .planning/ROADMAP.md_
